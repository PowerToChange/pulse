
<div class="searchResultsTitle">
  <%= image_tag("silk/world.png") %>

  <% if @gsa_results_unauthenticated.present? %>
    <%= "Public " %>
  <% else %>
    <%= "#{image_tag("silk/key.png", :class => "theKey", :title => " - <span class='whiteFont'>You can see these personalized web results because you are logged into TheKey.</span>")} " %>
  <% end %>

  <strong>Web</strong> results for <strong><%= @q %></strong>

  <div class="searchResultsSize">
    <%= "0 " if @web.total_results == 0 %>
    web results
    <% if @web.total_results > @web.per_page %>
      <% onCurPageEnd = @web.current_page * @web.per_page %>
      <% onCurPageBegin = (onCurPageEnd-@web.per_page)+1 %>
      <% onCurPageEnd = onCurPageEnd > @web.total_results ? @web.total_results : onCurPageEnd %>
      <%= "#{onCurPageBegin}-#{onCurPageEnd}" %>
    <% end %>
  </div>

  <% if @gsa_results_unauthenticated.present? %>
    <div class="searchAuthenticationWarning">
      These are publicly available search results.
      To see the complete set of secure search results,<br/>personalized for you, we'll need to check your ID.
      <%= link_to("Click here to login to TheKey.", :controller => :sessions, :action => :destroy,
        :destination => "https://signin.mygcx.org/cas/login?service=#{CGI::escape(url_for(:action => "index", :controller => "search", :q => @q,:only_path=> false))}&gateway=false") %>
    </div>
  <% end %>
</div>

<ul id="WebSearchResults">
  <% if @web.results.size > 0 %>
    <%= render :partial => "web_result", :collection => @web.results -%>

    <% if pagination == true %>
      <br/>
      <div class="searchResultsPagination">
        <%= will_paginate @web, :page_links => false %>
      </div>
    <% else %>
      <% if @web.total_results > @num_results_per_page %>
        <li class="searchResult searchResultMore">
          <%= link_to("See more web results Â»", :action => "web", :controller => "search", :q => @q, :page => 2) %>
        </li>
      <% end %>
    <% end %>

  <% else %>
    <p>
      No web results found for <strong><%= @q %></strong>.<br/>
      Try using different or more general search terms.
    </p>
  <% end %>
</ul>

<script type="text/javascript">
  // show tooltip on hover over key icon
  $(".theKey").tooltip({
    track: true,
    delay: 0,
    showURL: false,
    showBody: " - ",
    fade: 100
  });
</script>
