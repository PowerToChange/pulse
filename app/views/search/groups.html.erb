
<h1 id="reportTitle">Search Groups</h1>

<% if @q.present? %>

<div id="searchHeaderInfo">
</div>

<div id="searchFilterControlsContainer">
  <%= render :partial => "filter_controls" %>
</div>

<div id="searchResultsContainer">
  <br/>
  
  <% if session[:search][:authorized_to_search_groups] %>
    <div class="searchResultsTitle">
      <%= image_tag("silk/group.png") %> <strong>Group</strong> results for <strong><%= @q %></strong>

      <div class="searchResultsSize">
        <% if @groups.total_entries > @groups.per_page %>
          <% onCurPageEnd = @groups.current_page * @groups.per_page %>
          <% onCurPageBegin = (onCurPageEnd-@groups.per_page)+1 %>
          <% onCurPageEnd = onCurPageEnd > @groups.total_entries ? @groups.total_entries : onCurPageEnd %>
          <%= "#{onCurPageBegin}-#{onCurPageEnd} of" %>
        <% end %>
        <%= pluralize(@groups.total_entries, "group") %>
      </div>

    </div>

    <ul id="GroupSearchResults">
      <% if @groups.size > 0 %>
        <%= render :partial => "group", :collection => @groups %>
      <% else %>
        <p>
          No groups found for <strong><%= @q %></strong> within your ministry.<br/>
          Try searching for part of the group name or the name of someone who's in the group you're looking for.
        </p>
      <% end %>
    </ul>

    <br/>
    <div class="searchResultsPagination">
      <%= will_paginate @groups %>
    </div>
  <% end %>

</div>


<% else %>

<br/>
<p><h3>Don't be shy, search for a person or group by using the search box!</h3></p>

<% end %>