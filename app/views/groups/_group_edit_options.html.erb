<%- if authorized?(:update, :groups) -%>

  <%= link_to_function 'Transfer', "$('#transfer').fadeIn()", :class => 'small' %>

  <%= link_to_remote 'Remove', {:url => group_involvement_url(@gi.id || 0), :method => :delete, 
    :with => "#{data}", :confirm => "Are you sure you want to remove these people?",
    :condition => "$('#transfer_form_member :checked').length > 0 || $('#transfer_form_leader :checked').length > 0
                                        || $('#transfer_form_co_leader :checked').length > 0 || $('#transfer_form_interested :checked').length > 0"},
    {:class => 'small'} 
  %>

  <%= link_to_remote 'Compare Timetables', {
    :url => group_involvement_url(@gi.id || 0), 
    :with => "#{data}", :complete => "location.hash = 'compare';"
  }, {:class => 'small'} 
  %>

  <%- tooltip do -%>
    <p>Use this option to generate a spreadsheet containing the results of comparing the schedules of selected group members.</p>
  <%- end -%>

  <br/>
  <div id="transfer"  style="display:none">
    <br />
    <%- form_remote_tag({:url => "/group_involvements/transfer/#{@gi.try(:id) || 0}", :html => {:id => 'transfer_to_form'}}) do -%>
      Pick a group to transfer the selected people to:<br />
      <%= select_tag('transfer_to', options_for_select(@groups.collect {|g| [g.name, g.id]})) %>
      <%= link_to_remote 'Go', {:url => "/group_involvements/transfer/#{@gi.try(:id) || 0}", 
        :with => "#{data}"},
          {:class => 'small'} 
      %>
      <br />
    <%- end -%>
  </div>
<% end %>  
