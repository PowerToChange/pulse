<%= javascript_include_tag "stats.js" %>


<h1 id="statsTitle">Statistics</h1>


<div class="statsFormContainer">
  <div class="statsFormBox">
    <h2 class="statsFormBoxTitle">Team Member Report</h2>

    <br/>

    <% form_for :report, :html => { :name => 'reportForm' } do |form| %>
      <p class="statsFormField">
        <%= form.label :ministry, "Team:" %>
        <%= form.collection_select :ministry, @ministries, :id, :name, :selected => @ministry_id %>
        <%= observe_field 'report_ministry', :url => {:action => "select_report"},
                                             :with => "getWithStringForReportForm()",
                                             :before => "beginLoadingStatsTab()",
                                             :complete => "completeLoadingStatsTab()" %>
      </p>
      
      <br/>

      <div id="statsRadioButtonContainer">
        <div id="summaryRadioButton" class="statsRadioButton">
          <%= form.radio_button :summary, "summary", :checked => @summary %>
          <%= form.label :summary_summary, "Summary" %>
          <%= observe_field 'report_summary_summary', :url => {:action => "select_report"},
                                                      :with => "getWithStringForReportForm()",
                                                      :before => "beginLoadingStatsTab()",
                                                      :complete => "completeLoadingStatsTab()" %>
        </div>

        <div class="statsRadioButton">
          <%= form.radio_button :summary, "campus", :checked => !@summary %>
          <%= form.label :summary_campus, "Campus drill-down" %>
          <%= observe_field 'report_summary_campus', :url => {:action => "select_report"},
                                                     :with => "getWithStringForReportForm()",
                                                     :before => "beginLoadingStatsTab()",
                                                     :complete => "completeLoadingStatsTab()" %>
        </div>
      </div>
      
      <br/>
    <% end %>

    <br/>

    <div id="statsReportTimeTabs">
      <div id="statsReportTabYear" class="statsReportTab statsFormField <%= "statsTabActive" if @selected_time_tab_id == "statsReportTabYear" %>" title="year">
        <%= time_tab_link_to_remote("year") %>
      </div>


      <div id="statsReportTabSemester" class="statsReportTab statsFormField <%= "statsTabActive" if @selected_time_tab_id == "statsReportTabSemester" %>" title="semester">
        <%= time_tab_link_to_remote("semester") %>
      </div>


      <div id="statsReportTabMonth" class="statsReportTab statsFormField <%= "statsTabActive" if @selected_time_tab_id == "statsReportTabMonth" %>" title="month">
        <%= time_tab_link_to_remote("month") %>
      </div>


      <div id="statsReportTabWeek" class="statsReportTab statsFormField <%= "statsTabActive" if @selected_time_tab_id == "statsReportTabWeek" %>" title="week">
        <%= time_tab_link_to_remote("week") %>
      </div>
    </div>

  </div>
</div>


<br/>


<div id="results" class="statsContainer">
  <div id="statsSpinnerContainer"><%= image_tag("/images/default/shared/blue-loading.gif", :id => "spinnerStatsResults", :alt => "Spinner") %></div>
  <div id="statsYearResults" class="statsReportTabContainer" style="display: none;"></div>
  <div id="statsSemesterResults" class="statsReportTabContainer" style="display: none;"></div>
  <div id="statsMonthResults" class="statsReportTabContainer" style="display: none;"></div>
  <div id="statsWeekResults" class="statsReportTabContainer" style="display: none;"></div>
</div>








<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<div id="statsLinkBox" class="statsFormBox">
  <h2 class="statsLinkBoxTitle">Team Member Reports</h2>
  <ul class="statsLinkList">
    <li class="statsListLink"><%= link_to "Semester at a glance", url_for(:controller => :stats, :action => :semester_at_a_glance) %></li>
    <li class="statsListLink"><%= link_to "Summary by campus", url_for(:controller => :stats, :action => :summary_by_campus) %></li>
    <li class="statsListLink"><%= link_to "Summary by month", url_for(:controller => :stats, :action => :summary_by_month) %></li>
    <li class="statsListLink"><%= link_to "Summary by week", url_for(:controller => :stats, :action => :summary_by_week) %></li>
    <li class="statsListLink"><%= link_to "How people came to Christ", url_for(:controller => :stats, :action => :how_people_came_to_christ) %></li>
    <li class="statsListLink"><%= link_to "Year summary", url_for(:controller => :stats, :action => :year_summary) %></li>
  </ul>
</div>