<%= javascript_include_tag "stats.js" %>

<h1 id="statsTitle">Statistics</h1>

<br/>

<div class="statsFormContainer">
  <div class="statsFormBox">
    <h2 class="statsFormBoxTitle"></h2>

    <br/>

    <% form_for :report, :html => { :name => 'reportForm' } do |form| %>

      <p class="statsFormField">
        <%= form.label :ministry, "Ministry:" %>
        <%= form.collection_select :ministry, @ministries, :id, :name, :selected => @ministry_id %>
        <%= observe_field 'report_ministry', :url => {:action => "select_report"},
                                             :with => "getWithStringForReportForm()",
                                             :before => "beginLoadingStatsTab()",
                                             :complete => "completeLoadingStatsTab()" %>
      </p>

      <p class="statsFormField">
        <%= form.radio_button :summary, "summary", :checked => @summary %>
        <%= form.label :summary_summary, "Summary" %>
        <%= observe_field 'report_summary_summary', :url => {:action => "select_report"},
                                                    :with => "getWithStringForReportForm()",
                                                    :before => "beginLoadingStatsTab()",
                                                    :complete => "completeLoadingStatsTab()" %>

        <%= form.radio_button :summary, "campus", :checked => !@summary %>
        <%= form.label :summary_campus, "Campus drill-down" %>
        <%= observe_field 'report_summary_campus', :url => {:action => "select_report"},
                                                   :with => "getWithStringForReportForm()",
                                                   :before => "beginLoadingStatsTab()",
                                                   :complete => "completeLoadingStatsTab()" %>
      </p>

    <% end %>

    <br/>
  </div>


</div>


<div id="statsReportTimeTabs">
  <div id="statsReportTabYear" class="statsReportTab" title="year">
    <%=  link_to_remote("Year", :url => {:action => "select_report"}, :with => "getWithStringForReportForm(null, null, 'year')", :before => "beginLoadingStatsTab()", :complete => "completeLoadingStatsTab()" ) %>
  </div>


  <div id="statsReportTabSemester" class="statsReportTab statsTabActive" title="semester">
    <%=  link_to_remote("Semester", :url => {:action => "select_report"}, :with => "getWithStringForReportForm(null, null, 'semester')", :before => "beginLoadingStatsTab()", :complete => "completeLoadingStatsTab()") %>
  </div>


  <div id="statsReportTabMonth" class="statsReportTab" title="month">
    <%=  link_to_remote("Month", :url => {:action => "select_report"}, :with => "getWithStringForReportForm(null, null, 'month')", :before => "beginLoadingStatsTab()", :complete => "completeLoadingStatsTab()") %>
  </div>


  <div id="statsReportTabWeek" class="statsReportTab" title="week">
    <%=  link_to_remote("Week", :url => {:action => "select_report"}, :with => "getWithStringForReportForm(null, null, 'week')", :before => "beginLoadingStatsTab()", :complete => "completeLoadingStatsTab()") %>
  </div>
</div>


<div id="results" class="statsContainer">

  <%=spinner('StatsResults')%>
  <div id="statsYearResults" class="statsReportTabContainer" style="display: none;">YEAR RESULTS</div>
  <div id="statsSemesterResults" class="statsReportTabContainer" style="display: none;">SEMESTER RESULTS</div>
  <div id="statsMonthResults" class="statsReportTabContainer" style="display: none;">MONTH RESULTS</div>
  <div id="statsWeekResults" class="statsReportTabContainer" style="display: none;">WEEK RESULTS</div>

</div>