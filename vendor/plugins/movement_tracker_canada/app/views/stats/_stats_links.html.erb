<%

submit_links = [{ :text => "Indicated Decision", :controller => :prcs, :action => :index },
                { :text => "Weekly Stats", :controller => :weekly_reports, :action => :new },
                { :text => "Monthly Stats", :controller => :monthly_reports, :action => :new },
                { :text => "Semester Stats", :controller => :semester_reports, :action => :new },
                { :text => "Goals", :controller => :annual_goals_reports, :action => :new }]

report_links = [] # once contained links to reports but they were all moved into constants.rb

def clean_links(links)
  links.collect { |l| authorized?(l[:action], l[:controller]) ? l : nil }.compact
end

submit_links = clean_links(submit_links)
report_links = clean_links(report_links)

unless submit_links.empty?
	%>
	<h3>Update</h3>
	<ul class="statsLinkList">
	<%
	submit_links.each do |l|
	  %>
	  <li class="statsListLink"><%= link_to l[:text], url_for(:controller => l[:controller], :action => l[:action]) %></li>
	  <%
	end
  %></ul><%
end


unless report_links.empty? && report_type_links_to_show.empty?
  %>
  <h3>Review</h3>
  <ul class="statsLinkList">
  <%
end
report_links.each do |l|
  %>
  <li class="statsListLink"><%= link_to l[:text], url_for(:controller => l[:controller], :action => l[:action]) %></li>
  <%
end
%>
<%= render :partial => 'stats/report_type_list_links' %>
<%
unless report_links.empty? && report_type_links_to_show.empty?
  %>
  </ul>
  <%
end

%>
