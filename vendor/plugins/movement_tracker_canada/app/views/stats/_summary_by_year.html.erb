
<p class="statsTitle"><%= @report_description %></p>
<table class="statsTable">
    <tr>
        <td>
        </td>
        <% semesters = Semester.find_semesters_by_year(@year_id) %>

        <% semesters.each do |semester| %>
          <td class="statsTableTitle">
            <%=  semester.description %>
            <%#=link_to "#{semester.description}", :action => "semester_at_a_glance", :report => { 'ministry' => @ministry_id, 'campus_id' => @campus_id, 'semester' => "#{semester.description}"} %>
          </td>
        <% end %>

        <td class="statsTableTitle">
            Total
        </td>

    </tr>
    <tr class="<%= cycle('highlight', 'nohighlight') %>">
        <td class="statsTableTitle">
            Spiritual Conversations by Staff
        </td>
        <% total = 0 %>

        <% semesters.each do |semester| %>
          <td>
              <%= stat = Week.find_stats_semester_campuses(semester.id, @campuses_selected, sp_conv) %>
              <% total += stat %>
          </td>
        <% end %>

        <td>
            <%= total %>
        </td>
    </tr>
    <tr class="<%= cycle('highlight', 'nohighlight') %>">
        <td class="statsTableTitle">
            Spiritual Conversations by Students
        </td>
        <% total = 0 %>

        <% semesters.each do |semester| %>
          <td>
              <%= stat = Week.find_stats_semester_campuses(semester.id, @campuses_selected, sp_conv_std) %>
              <% total += stat %>
          </td>
        <% end %>

        <td>
            <%= total %>
        </td>
    </tr>
    <tr class="<%= cycle('highlight', 'nohighlight') %>">
        <td class="statsTableTitle">
            Gospel Presentations by Staff
        </td>
        <% total = 0 %>

        <% semesters.each do |semester| %>
          <td>
              <%= stat = Week.find_stats_semester_campuses(semester.id, @campuses_selected, gos_pres) %>
              <% total += stat %>
          </td>
        <% end %>

        <td>
            <%= total %>
        </td>
    </tr>
    <tr class="<%= cycle('highlight', 'nohighlight') %>">
        <td class="statsTableTitle">
            Gospel Presentations by Students
        </td>
        <% total = 0 %>

        <% semesters.each do |semester| %>
          <td>
              <%= stat = Week.find_stats_semester_campuses(semester.id, @campuses_selected, gos_pres_std) %>
              <% total += stat %>
          </td>
        <% end %>

        <td>
            <%= total %>
        </td>
    </tr>
    <tr class="<%= cycle('highlight', 'nohighlight') %>">
        <td class="statsTableTitle">
            Holy Spirit Presentations
        </td>
        <% total = 0 %>

        <% semesters.each do |semester| %>
          <td>
              <%= stat = Week.find_stats_semester_campuses(semester.id, @campuses_selected, hs_pres) %>
              <% total += stat %>
          </td>
        <% end %>
        
        <td>
            <%= total %>
        </td>
    </tr>

    <tr>
        <td>
            <br/>
        </td>
    </tr>
    <tr class="highlight">
        <td class="statsTableTitle">
            Indicated Decisions
        </td>
        <% total = 0 %>

        <% semesters.each do |semester| %>
          <td>
              <%= stat = Prc.count_by_semester_and_campuses(semester.id, @campuses_selected) %>
          </td>
          <% total += stat %>
        <% end %>

        <td>
            <%= total %>
        </td>
    </tr>
</table>
